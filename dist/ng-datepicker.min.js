!function(){"use strict";function a(a,b,c,d,e,f){this.id="calCtrl",this.selected=null,this.today=moment(),this.viewDate=moment(),this.startOfWeek=0,this.options={},this.years=[],this.year=this.viewDate.year(),this.month=this.viewDate.month(),this.isToday=function(a){return a.isSame(this.today,"day")},this.isCurrentMonth=function(a){return a.month()===this.viewDate.month()},this.isWeekend=function(a){return a.isoWeekday()>5},this.isSelected=function(a){return a.isSame(this.selected,"day")},this.isHighlighted=function(a){return this.highlightCallback?this.highlightCallback(a):!1},this.setDate=function(a){this.viewDate=a.clone(),this.updateSelectValues(a)},this.reset=function(){moment.isMoment(this.selected)?this.viewDate=this.selected.clone():this.viewDate=moment(),f(function(){this.updateSelectValues()}.bind(this))},this.updateSelectValues=function(a){a=a||this.viewDate,this.month=this.options.months[a.month()],this.year=a.year()};var g=function(a,b,c){if(0===b)throw"Quit jogging in place!!";return b>0?a.add(b,c):a.subtract(Math.abs(b),c),this.updateSelectValues(a),a}.bind(this);this.jogMonth=function(a){return g(this.viewDate,a,"months")},this.jogYear=function(a){return g(this.viewDate,a,"years")},this.select=function(b){this.selected=b,a.selectCallback&&a.selectCallback({date:b.clone()}),this.selected=b.clone(),this.viewDate=b.clone(),this.updateSelectValues()},this.updateCalendar=function(){var a,b,c,d=[],e=this.viewDate.clone().startOf("month");for(e.subtract(Math.abs(e.isoWeekday()-this.startOfWeek),"day"),a=0;6>a;a++)d[a]=[];for(a=0,b=0,c=0;42>a;a++,b++)a>0&&b%7===0&&(b=0,c++),d[c][b]=e.clone(),e.add(1,"day");this.calendar=d},this.setup=function(a){this.options=a,this.options.years=[];for(var b=this.options.yearStart;b<this.viewDate.year()+10;b++)this.options.years.push(b)},a.$watch("calCtrl.month",function(a,b){a!==b&&(this.viewDate.month(this.options.months.indexOf(this.month)),this.updateCalendar())}.bind(this)),a.$watch("calCtrl.year",function(){this.viewDate.year(this.year),this.updateCalendar()}.bind(this));var h=function(){this.updateCalendar()}.bind(this);h()}function b(a,b,c,d,e){this.id="dateCtrl",this.selectedDate={},this.viewDate={},this.options={},this.isHighlighted=function(a){return scope.range===!0?a>this.viewDate.startDate||a<this.viewDate.endDate:!1},this.hasRanges=function(){return this.options.ranges&&this.options.ranges.length>0},this.isRange=function(){return this.options.range},this.setup=function(a){this.options=a}}function c(a,b,c,d,e){c=angular.extend({monthLeftIcon:"fa fa-angle-left",yearLeftIcon:"fa fa-angle-double-left",monthRightIcon:"fa fa-angle-right",yearRightIcon:"fa fa-angle-double-right",range:!1,time:!1,timeFormat:"HH:mm:ss",format:"YYYY/MM/DD",position:"bottomleft",dateSelect:!0,daysOfWeek:moment.weekdaysShort(),months:moment.months(),yearStart:1990,autoHide:!0},c||{});var f=!1;this.options=function(){return c},this.show=function(){f||(b.show(),this.position(),this.isShowing=!0)},this.hide=function(){this.isShowing&&(angular.element(d).off(".e7datepicker"),angular.element(d.document).off("e7datepicker"),b.hide(),this.isShowing=!1)},this.toggle=function(a){this.isShowing?this.hide():this.show()},this.position=function(a){var c={top:0,right:"auto",left:0};c.top=h(),angular.extend(c,g()),b.css(c)};var g=function(){var e={},f=6;switch("top"===c.position.substr(0,3)&&(f=3),c.position.substr(f)){case"left":e={right:"auto",left:a.offset().left};break;case"center":e={left:a.outerWidth()/2-b.outerWidth()/2+(a.outerWidth()-a.innerWidth())+a.offset().left};break;default:var g=b.offset().left+b.outerWidth()>angular.element(d).width();e={left:g?"auto":a.offset().left+(a.outerWidth()-b.outerWidth()),right:g?0:"auto"},g&&(e.right=0)}return e}.bind(this),h=function(){b.addClass("dropup");var e=a.offset().top-b.outerHeight(),f=a.offset().top+a.outerHeight()+b.outerHeight()>angular.element(d).innerHeight(),g=a.offset().top-b.outerHeight()<0;return("bottom"===c.position.substr(0,6)&&!f||g)&&(b.removeClass("dropup"),e=a.offset().top+a.outerHeight()),e}.bind(this),i=function(){this.position(),$(window).on("resize.e7datepicker",$.proxy(function(a){this.position(a)},this)),angular.element(d.document).on("focusin.e7datepicker click.e7datepicker mousedown.e7datepicker touchend.e7datepicker mouseup.e7datepicker [data-toggle=dropdown]",$.proxy(function(c){var d=angular.element(c.target);0===d.closest(a).length&&0===d.closest(b).length&&0===d.closest(".calendar-table").length&&(e.$broadcast("reset.calendar."+e.name),this.hide())}.bind(this),this))}.bind(this);i()}a.$inject=["$scope","$element","$attrs","$transclude","$log","$timeout"],b.$inject=["$scope","$element","$attrs","$transclude","$log"],angular.module("e7datepicker",[]).directive("e7datepicker",["$templateCache","$compile","$window","$log",function(a,d,e,f){return{require:["ngModel"],restrict:"A",controller:b,controllerAs:"dateCtrl",scope:{name:"@e7datepicker",options:"@"},link:function(b,f,g,h){b.options=b.options||{};var i=h[0],j=b.dateCtrl,k=f,l=angular.element(d(a.get("ngdatetimepicker/datepicker.html"))(b));l.appendTo("body");var m=new c(k,l,b.options,e,b);j.setup(m.options()),k.on("click.e7datepicker",function(){m.show()}),j.selectStart=function(a){if(!moment.isMoment(a))throw"selected date must be a moment instance not "+typeof a;j.selectedDate=a,i.$setViewValue(a),i.$render(),j.options.autoHide&&l.hide()},j.selectEnd=function(a){if(!moment.isMoment(a))throw"selected date must be a moment instanct not "+typeof a;j.selectedDate.end=j.rightDate,i.$setViewValue(j.selectedDate.clone())},i.$parsers.push(function(a){if(i.$isEmpty(a))return a;if(!moment.isMoment(a)){var b=moment(a,n(),!0);a=b.isValid()?b:j.selectedDate}return j.selectedDate=a,j.leftDate=a,a}),i.$render=function(){if(j.options.range===!0&&moment.isMoment(j.selectedDate.start))k.val(j.selectedDate.format(n()));else if(moment.isMoment(i.$viewValue))j.selectedDate=i.$viewValue.clone(),k.val(i.$viewValue.format(n()));else if(i.$isEmpty(i.$modelValue))j.selectedDate=null,j.leftDate=null,k.val("");else if(moment.isMoment(i.$modelValue))k.val(i.$modelValue.format(n())),j.selectedDate=i.$modelValue,j.leftDate=i.$modelValue;else if(moment.isMoment(j.selectedDate))k.val(j.selectedDate.format(n()));else if("string"==typeof i.$modelValue){var a=moment(i.$modelValue,n());a.isValid()&&(j.selectedDate=a,j.leftDate=a,k.val(a.format(n())))}};var n=function(a){var b=j.options.format;return j.options.time&&!a&&(b+=" "+j.options.timeFormat),b}}}}]).directive("ngCalendar",["$templateCache","$compile","$window","$log","$parse",function(b,c,d,e,f){return{restrict:"E",priority:1,templateUrl:"ngdatetimepicker/calendar.html",controller:a,controllerAs:"calCtrl",scope:{name:"@",highlightCallback:"&",selectCallback:"&",options:"=",dateSelected:"="},link:function(a,b,c,d){var e=(d[0],a.calCtrl);a.options=a.options||{},e.setup(a.options),a.$watch("dateSelected",function(a){if(angular.isDefined(a)||(a=moment()),!moment.isMoment(a)){if(null===a)return;throw"Calendar expects value to be a moment not "+typeof a+" "+a}var b=a.clone();e.setDate(b),e.selected=b}),a.$on("reset.calendar."+a.name.slice(0,a.name.indexOf("-")),function(a){e.reset()})}}}])}();