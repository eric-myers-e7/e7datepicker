!function(){"use strict";function CalendarController($scope,$element,$attrs,$transclude,$log){this.id="calCtrl",this.selected=null,this.today=moment(),this.viewDate=moment(),this.startOfWeek=0,this.options={},this.years=[],this.year=this.viewDate.year(),this.month=this.viewDate.month(),this.isToday=function(day){return day.isSame(this.today,"day")},this.isCurrentMonth=function(day){return day.month()===this.viewDate.month()},this.isWeekend=function(day){return day.isoWeekday()>5},this.isSelected=function(day){return day.isSame(this.selected,"day")},this.isHighlighted=function(day){return this.highlightCallback?this.highlightCallback(day):!1},this.setDate=function(date){this.viewDate=date.clone(),this.updateSelectValues(date)},this.reset=function(){moment.isMoment(this.selected)?this.viewDate=this.selected.clone():this.viewDate=moment(),this.updateSelectValues(),$scope.$apply()},this.updateSelectValues=function(date){date=date||this.viewDate,this.month=this.options.months[date.month()],this.year=date.year()};var jog=function(date,length,period){if(0===length)throw"Quit jogging in place!!";return length>0?date.add(length,period):date.subtract(Math.abs(length),period),this.updateSelectValues(date),date}.bind(this);this.jogMonth=function(length){return jog(this.viewDate,length,"months")},this.jogYear=function(length){return jog(this.viewDate,length,"years")},this.select=function(day){this.selected=day,$scope.selectCallback&&$scope.selectCallback({date:day.clone()}),this.selected=day.clone(),this.viewDate=day.clone(),this.updateSelectValues()},this.updateCalendar=function(){var i,col,row,calendar=[],startDate=this.viewDate.clone().startOf("month");for(startDate.subtract(Math.abs(startDate.isoWeekday()-this.startOfWeek),"day"),i=0;6>i;i++)calendar[i]=[];for(i=0,col=0,row=0;42>i;i++,col++)i>0&&col%7===0&&(col=0,row++),calendar[row][col]=startDate.clone(),startDate.add(1,"day");this.calendar=calendar},this.setup=function(options){this.options=options,this.options.years=[];for(var i=this.options.yearStart;i<this.viewDate.year()+10;i++)this.options.years.push(i)},$scope.$watch("calCtrl.month",function(oldValue,newValue){oldValue!==newValue&&(this.viewDate.month(this.options.months.indexOf(this.month)),this.updateCalendar())}.bind(this)),$scope.$watch("calCtrl.year",function(){this.viewDate.year(this.year),this.updateCalendar()}.bind(this));var init=function(){this.updateCalendar()}.bind(this);init()}function DatePickerController($scope,$element,$attrs,$transclude,$log){this.id="dateCtrl",this.selectedDate={},this.viewDate={},this.options={},this.isHighlighted=function(day){
//if range select all between range
//if range select all between range
return scope.range===!0?day>this.viewDate.startDate||day<this.viewDate.endDate:!1},this.hasRanges=function(){return this.options.ranges&&this.options.ranges.length>0},this.isRange=function(){return this.options.range},this.setup=function(options){this.options=options}}function DatePicker(input,popover,options,$window,scope){options=angular.extend({monthLeftIcon:"fa fa-angle-left",yearLeftIcon:"fa fa-angle-double-left",monthRightIcon:"fa fa-angle-right",yearRightIcon:"fa fa-angle-double-right",range:!1,time:!1,timeFormat:"HH:mm:ss",format:"YYYY/MM/DD",position:"bottomleft",dateSelect:!0,daysOfWeek:moment.weekdaysShort(),months:moment.months(),yearStart:1990,autoHide:!0},options||{});var isShowing=!1;this.options=function(){return options},this.show=function(){isShowing||(popover.show(),this.position(),this.isShowing=!0)},this.hide=function(){this.isShowing&&(angular.element($window).off(".e7datepicker"),angular.element($window.document).off("e7datepicker"),popover.hide(),this.isShowing=!1)},this.toggle=function(e){this.isShowing?this.hide():this.show()},this.position=function(e){var css={top:0,right:"auto",left:0};css.top=vertical(),angular.extend(css,horizontal()),popover.css(css)};var horizontal=function(){var pos={},offset=6;switch("top"===options.position.substr(0,3)&&(offset=3),options.position.substr(offset)){case"left":pos={right:"auto",left:input.offset().left};break;case"center":pos={left:input.outerWidth()/2-popover.outerWidth()/2+(input.outerWidth()-input.innerWidth())+input.offset().left};break;default:var containerPastRight=popover.offset().left+popover.outerWidth()>angular.element($window).width();pos={left:containerPastRight?"auto":input.offset().left+(input.outerWidth()-popover.outerWidth()),right:containerPastRight?0:"auto"},containerPastRight&&(pos.right=0)}return pos}.bind(this),vertical=function(){popover.addClass("dropup");var top=input.offset().top-popover.outerHeight(),tooLow=input.offset().top+input.outerHeight()+popover.outerHeight()>angular.element($window).innerHeight(),tooHigh=input.offset().top-popover.outerHeight()<0;return("bottom"===options.position.substr(0,6)&&!tooLow||tooHigh)&&(popover.removeClass("dropup"),top=input.offset().top+input.outerHeight()),top}.bind(this),init=function(){this.position(),
// Reposition the picker if the window is resized while it's open
$(window).on("resize.e7datepicker",$.proxy(function(e){this.position(e)},this)),angular.element($window.document).on("focusin.e7datepicker click.e7datepicker mousedown.e7datepicker touchend.e7datepicker mouseup.e7datepicker [data-toggle=dropdown]",$.proxy(function(e){var target=angular.element(e.target);0===target.closest(input).length&&0===target.closest(popover).length&&0===target.closest(".calendar-table").length&&(scope.$broadcast("reset.calendar."+scope.name),this.hide())}.bind(this),this))}.bind(this);init()}CalendarController.$inject=["$scope","$element","$attrs","$transclude","$log"],DatePickerController.$inject=["$scope","$element","$attrs","$transclude","$log"],angular.module("e7datepicker",[]).directive("e7datepicker",["$templateCache","$compile","$window","$log",function($templateCache,$compile,$window,$log){return{require:["ngModel"],restrict:"A",controller:DatePickerController,controllerAs:"dateCtrl",scope:{name:"@e7datepicker",options:"@"},link:function(scope,element,attr,ctrl){scope.options=scope.options||{};var modelCtrl=ctrl[0],dateCtrl=scope.dateCtrl,input=element,popover=angular.element($compile($templateCache.get("ngdatetimepicker/datepicker.html"))(scope));popover.appendTo("body");var datepicker=new DatePicker(input,popover,scope.options,$window,scope);dateCtrl.setup(datepicker.options()),input.on("click.e7datepicker",function(){datepicker.show()}),dateCtrl.selectStart=function(date){if(!moment.isMoment(date))throw"selected date must be a moment instance not "+typeof date;dateCtrl.selectedDate=date,modelCtrl.$setViewValue(date),modelCtrl.$render(),dateCtrl.options.autoHide&&popover.hide()},dateCtrl.selectEnd=function(date){if(!moment.isMoment(date))throw"selected date must be a moment instanct not "+typeof date;dateCtrl.selectedDate.end=dateCtrl.rightDate,modelCtrl.$setViewValue(dateCtrl.selectedDate.clone())},modelCtrl.$parsers.push(function(value){if(!moment.isMoment(value)){var date=moment(value,getFormat(),!0);value=date.isValid()?date:dateCtrl.selectedDate}return dateCtrl.selectedDate=value,dateCtrl.leftDate=value,value}),modelCtrl.$render=function(){if(dateCtrl.options.range===!0&&moment.isMoment(dateCtrl.selectedDate.start))input.val(dateCtrl.selectedDate.format(getFormat()));else if(moment.isMoment(modelCtrl.$viewValue))dateCtrl.selectedDate=modelCtrl.$viewValue.clone(),input.val(modelCtrl.$viewValue.format(getFormat()));else if(moment.isMoment(modelCtrl.$modelValue))input.val(modelCtrl.$modelValue.format(getFormat())),dateCtrl.selectedDate=modelCtrl.$modelValue,dateCtrl.leftDate=modelCtrl.$modelValue;else if(moment.isMoment(dateCtrl.selectedDate))input.val(dateCtrl.selectedDate.format(getFormat()));else if("string"==typeof modelCtrl.$modelValue){var date=moment(modelCtrl.$modelValue,getFormat());date.isValid()&&(dateCtrl.selectedDate=date,dateCtrl.leftDate=date,input.val(date.format(getFormat())))}};var getFormat=function(date){var format=dateCtrl.options.format;return dateCtrl.options.time&&!date&&(format+=" "+dateCtrl.options.timeFormat),format}}}}]).directive("ngCalendar",["$templateCache","$compile","$window","$log","$parse",function($templateCache,$compile,$window,$log,$parse){return{restrict:"E",priority:1,templateUrl:"ngdatetimepicker/calendar.html",controller:CalendarController,controllerAs:"calCtrl",scope:{name:"@",highlightCallback:"&",selectCallback:"&",options:"=",dateSelected:"="},link:function(scope,element,attrs,ctrl){var calCtrl=(ctrl[0],scope.calCtrl);scope.options=scope.options||{},calCtrl.setup(scope.options),scope.$watch("dateSelected",function(newValue){if(angular.isDefined(newValue)||(newValue=moment()),!moment.isMoment(newValue)){if(null===newValue)return;throw"Calendar expects value to be a moment not "+typeof newValue+" "+newValue}var date=newValue.clone();calCtrl.setDate(date),calCtrl.selected=date}),scope.$on("reset.calendar."+scope.name.slice(0,scope.name.indexOf("-")),function(e){calCtrl.reset()})}}}])}();
//# sourceMappingURL=ng-datepicker.min.js.map